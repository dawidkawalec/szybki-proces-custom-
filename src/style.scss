@use 'utopia';
@use 'mixins' as *;

// Variables
$color-bg: #18202b; // Stary kolor tła (dla FAQ/Footer)
$color-bg-dark: #141C25; // Nowy, ciemniejszy kolor (dla Blog/Mapa/Why-Us/Reviews)
$color-text: #ffffff;
$color-text-dark: #1A1A1A; // Ciemny tekst na kartach
$color-text-muted: #b0b0b0;
$color-accent: #c6a87c; // Złoty kolor ze screena
$color-card-bg: #ffffff; // Białe tło kart
$color-danger-bg: #3E2021; // Bordowe tło sekcji ryzyka
$font-heading: 'Merriweather', serif;
$font-body: 'Montserrat', sans-serif;

$container-max-width: 1400px;

// Reset & Base
*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: $font-body;
  background-color: #f4f4f4;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

// Reviews Section
.reviews {
  background-color: $color-bg-dark;
  color: $color-text;
  padding: space(3xl) 0;
  overflow-x: hidden; // Zapobiega poziomemu scrollowi strony przez wystający slider

  &__container {
    max-width: $container-max-width;
    margin: 0 auto;
    padding: 0 space(l);
    
    display: grid;
    grid-template-columns: 1fr 1.5fr; // Lewa kolumna mniejsza, prawa szersza na slider
    gap: space(2xl);
    align-items: center;

    @media (max-width: 1024px) {
      grid-template-columns: 1fr; // Na mniejszych ekranach jedna kolumna
      gap: space(xl);
    }
  }

  &__info {
    display: flex;
    flex-direction: column;
    gap: space(m);
    max-width: 45ch;
  }

  &__title {
    font-family: $font-heading;
    font-size: step(3);
    font-weight: 700;
    line-height: 1.2;
  }

  &__desc {
    font-family: $font-body;
    font-size: step(0);
    color: $color-text-muted;
    line-height: 1.6;
    margin-bottom: space(m);
  }

  &__nav {
    display: flex;
    gap: space(m);
  }

  &__btn {
    width: 50px;
    height: 50px;
    border: 1px solid $color-accent;
    background: transparent;
    color: $color-accent;
    border-radius: 50%; // Okrągłe przyciski? Na screenie są strzałki bez tła? 
    // Na screenie: strzałki są proste, bez koła.
    // Zróbmy minimalistyczne jak na screenie: same strzałki
    border: none;
    border-radius: 0;
    width: auto;
    height: auto;
    padding: 0;
    cursor: pointer;
    transition: opacity 0.3s ease, transform 0.2s ease;
    
    svg {
      width: 48px; // Duże strzałki
      height: 48px;
      stroke-width: 0.5; // Cienkie linie
    }

    &:hover {
      opacity: 0.7;
      transform: scale(1.1);
    }

    &--prev {
      // Opcjonalnie
    }
  }

  // Slider Wrapper
  &__slider-wrapper {
    width: 100%;
    // Klucz do wystawania poza kontener:
    // Jeśli chcemy, żeby slajdy wyjeżdżały w prawo poza max-width kontenera:
    margin-right: -50vw; // Rozciągnij w prawo
    padding-right: 50vw; // ...ale zachowaj padding? Nie.
    
    // Prostsza metoda: overflow visible na swiperze + width: 100% kolumny
    min-width: 0; // Ważne dla grida
  }
}

// Swiper Custom Styles
.reviews-swiper {
  overflow: visible !important; // Pozwala slajdom wystawać poza kontener swipera
  
  .swiper-slide {
    width: 400px; // Stała szerokość karty? Lub auto
    height: auto;
    opacity: 0.4; // Nieaktywne slajdy przygaszone (opcjonalnie, jak na screenie 3-cia karta ciemna)
    transition: opacity 0.3s ease;

    &.swiper-slide-active,
    &.swiper-slide-next {
      opacity: 1; // Aktywny i następny widoczne
    }
  }
}

// Review Card
.review-card {
  background-color: transparent; // Przezroczyste tło
  // Lub bardzo ciemne? Na screenie wygląda jak przezroczyste na ciemnym tle
  display: flex;
  flex-direction: column;
  gap: space(m);
  
  &__header {
    display: flex;
    align-items: center;
    gap: space(m);
  }

  &__avatar {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    overflow: hidden;
    flex-shrink: 0;
    
    img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  }

  &__meta {
    display: flex;
    flex-direction: column;
    gap: space(3xs);
  }

  &__name {
    font-family: $font-heading;
    font-size: step(0);
    font-weight: 700;
    color: $color-text;
  }

  &__role {
    font-family: $font-body;
    font-size: step(-2);
    color: $color-text-muted;
  }

  &__text {
    font-family: $font-body;
    font-size: step(-1);
    line-height: 1.6;
    color: rgba($color-text, 0.9);
    font-style: italic; // Cytat
  }

  &__rating {
    display: flex;
    align-items: center;
    gap: space(s);
  }

  &__stars {
    display: flex;
    color: $color-accent; // Złote gwiazdki
    gap: 2px;
  }

  &__score {
    font-family: $font-body;
    font-size: step(0);
    font-weight: 600;
    color: $color-text;
  }
}

// Why Us Section
.why-us {
  background-color: $color-bg-dark;
  color: $color-text;
  padding: space(3xl) 0;

  &__container {
    max-width: $container-max-width;
    margin: 0 auto;
    padding: 0 space(l);
    
    display: grid;
    grid-template-columns: 1fr 0.8fr 1fr; // Zmiana: Węższa środkowa kolumna
    gap: space(xl);
    align-items: stretch; // Rozciągnij do równej wysokości

    @media (max-width: 1024px) {
      grid-template-columns: 1fr 1fr; // Tablet: Zdjęcie (ukryte?) + Treść, Ryzyko pod spodem?
      // Albo: Treść + Ryzyko obok siebie, zdjęcie nad/pod?
      // Ze screena to layout desktopowy. Na tablet zrobimy:
      // Treść | Ryzyko
      // (Zdjęcie ukryte lub nad)
    }
    
    @media (max-width: 900px) {
      grid-template-columns: 1fr; // Mobile/Small Tablet: Jedna pod drugą
      gap: space(2xl);
    }
  }

  &__img-col {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    
    @media (max-width: 1024px) {
      display: none; // Ukrywamy zdjęcie na mniejszych ekranach dla czytelności, lub można przenieść
    }
  }

  &__img {
    width: 100%;
    height: 100%;
    max-height: 600px;
    object-fit: cover;
    border-radius: 4px;
    // Opcjonalnie gradient overlay jak na screenie (cień z lewej)
    mask-image: linear-gradient(to right, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 10%);
  }

  &__content-col {
    padding: space(l) 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  &__title {
    font-family: $font-heading;
    font-size: step(3);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: space(m);
    color: $color-text;
  }

  &__desc {
    font-family: $font-body;
    font-size: step(0);
    color: $color-text-muted;
    line-height: 1.6;
    margin-bottom: space(xl);
    max-width: 45ch;
  }

  &__list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: space(m);
  }

  &__item {
    display: flex;
    align-items: flex-start;
    gap: space(m);
  }

  &__icon-wrapper {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    background-color: $color-accent;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    
    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__text {
    font-family: $font-body;
    font-size: step(-1);
    color: $color-text;
    line-height: 1.5;
    padding-top: space(3xs); // Optyczne wyrównanie z ikoną
  }

  // Danger / Risk Column
  &__risk-col {
    background-color: $color-danger-bg;
    padding: space(xl);
    display: flex;
    flex-direction: column;
    justify-content: center;
    // border-radius: 4px; // Na screenie jest proste, bez radiusa, ale dla spójności można dodać
  }

  &__risk-title {
    font-family: $font-heading;
    font-size: step(2);
    font-weight: 700;
    margin-bottom: space(l);
    color: $color-text;
  }

  &__risk-list {
    list-style: none;
    display: flex;
    flex-direction: column;
    gap: space(l);
  }

  &__risk-item {
    display: flex;
    align-items: flex-start;
    gap: space(m);
  }

  &__risk-icon-wrapper {
    flex-shrink: 0;
    width: 32px;
    height: 32px;
    background-color: $color-accent; // Na screenie też złote ikony
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;

    svg {
      width: 18px;
      height: 18px;
    }
  }

  &__risk-content {
    display: flex;
    flex-direction: column;
    gap: space(2xs);
  }

  &__risk-heading {
    font-weight: 700;
    font-size: step(-1);
    color: $color-text;
  }

  &__risk-desc {
    font-size: step(-2);
    color: rgba($color-text, 0.8);
    line-height: 1.5;
  }
}

// Blog Section
.blog {
  background-color: $color-bg-dark; // Nowe ciemne tło
  color: $color-text;
  padding: space(3xl) 0;
  
  &__container {
    max-width: $container-max-width;
    margin: 0 auto;
    padding: 0 space(l);
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  &__header {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    width: 100%;
    margin-bottom: space(2xl);
    gap: space(s);
  }

  &__title {
    font-family: $font-heading;
    font-size: step(2); // Zmniejszono z step(3)
    font-weight: 700;
    line-height: 1.2;
    // max-width removed to allow full width centering
  }

  &__subtitle {
    font-family: $font-body;
    font-size: step(-1);
    color: $color-text-muted;
    max-width: 60ch; // Increased width for better centering look
    line-height: 1.6;
    text-align: center;
  }

  &__grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: space(l);
    width: 100%;
    margin-bottom: space(2xl);

    @media (max-width: 1024px) {
      grid-template-columns: repeat(2, 1fr);
    }

    @media (max-width: 640px) {
      grid-template-columns: 1fr;
    }
  }

  &__card {
    background-color: $color-card-bg;
    display: flex;
    flex-direction: column;
    transition: transform 0.3s ease;
    
    &:hover {
      transform: translateY(-5px);
    }
  }

  &__img-wrapper {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
  }

  &__img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  &__category {
    position: absolute;
    top: space(m);
    left: space(m);
    background-color: $color-accent;
    color: #000;
    padding: space(2xs) space(s);
    font-family: $font-body;
    font-weight: 600;
    font-size: step(-2);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  &__content {
    padding: space(l);
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    color: $color-text-dark;
  }

  &__date {
    display: flex;
    align-items: center;
    gap: space(2xs);
    font-size: step(-2);
    color: lighten($color-text-dark, 40%);
    margin-bottom: space(s);
    font-weight: 500;

    svg {
      width: 16px;
      height: 16px;
    }
  }

  &__card-title {
    font-family: $font-heading;
    font-size: step(0); // Zmieniono z step(1) na step(0)
    font-weight: 700;
    line-height: 1.3;
    margin-bottom: space(s);
    color: $color-text-dark;
  }

  &__card-desc {
    font-family: $font-body;
    font-size: step(-1);
    line-height: 1.6;
    color: lighten($color-text-dark, 20%);
    margin-bottom: space(l);
    flex-grow: 1;
  }

  &__link {
    display: inline-flex;
    align-items: center;
    gap: space(2xs);
    color: #000;
    text-decoration: none;
    font-weight: 700;
    font-size: step(-2);
    text-transform: uppercase;
    letter-spacing: 1px;
    transition: color 0.3s ease;

    &:hover {
      color: $color-accent;
    }
  }

  &__btn {
    background-color: $color-accent;
    color: #000;
    padding: space(s) space(2xl);
    text-decoration: none;
    font-weight: 600;
    font-size: step(0);
    border-radius: 2px;
    transition: background-color 0.3s ease;

    &:hover {
      background-color: lighten($color-accent, 10%);
    }
  }
}
